---
title: "[laravel åˆ†é›¢/DI/ãƒªãƒã‚¸ãƒˆãƒªãƒ‘ã‚¿ãƒ¼ãƒ³]"
emoji: "ğŸŒŠ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: [laravel]
published: false
---
## laravelã€€åˆ†é›¢
ï¼‘ã€€controller ã€€ã€€ã€€ã€€ã€€â†’ã€€fatcontroller
ï¼’ã€€model (publicä»¥é™)ã€€â†’  fatModel
ï¼“ã€€ãƒªãƒã‚¸ãƒˆãƒªãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆServiceã¨åˆ¥ã«

## ãƒªãƒã‚¸ãƒˆãƒªãƒ‘ã‚¿ãƒ¼ãƒ³
èª¬æ˜ã¯ãƒ‡ãƒ¼ã‚¿ã®æ“ä½œã«é–¢é€£ã™ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã‚’åˆ‡ã‚Šé›¢ã—ã€åˆ¥ã®æŠ½è±¡åŒ–ã—ãŸãƒ¬ã‚¤ãƒ¤ã«ä»»ã›ã‚‹ã“ã¨ã§
æ‹¡å¼µæ€§ã‚„ä¿å®ˆæ€§ã‚’é«˜ã‚ã‚‹ã€‚ã€‚ã¨ã„ã‚ã‚Œã¦ã„ã‚‹ãŒå€‹äººçš„ã«ã¯
é–‹ç™ºå·¥ç¨‹ã‚„é€Ÿåº¦ã‚’çŸ­æœŸçš„ã«å¤§å¹…ã«çŸ­ç¸®ã™ã‚‹ã‚‚ã®ã§ã¯ãªãã€å ´åˆã«ã‚ˆã£ã¦ã¯ãƒã‚¤ãƒŠã‚¹ã«ãªã‚Šã†ã‚‹å¯èƒ½æ€§ãŒã‚ã‚‹ã€‚
ãŸã ã—ã€é•·æœŸçš„ã«è¦‹ãŸã¨ãã«ãƒ†ã‚¹ãƒˆãã®ä»–è¨­è¨ˆã®é–¢ä¿‚ä¸Šã‚ã‚‹ç¨‹åº¦ã®è¦æ¨¡ä»¥ä¸Šãªã‚‰æœ€çµ‚ã‚³ã‚¹ãƒˆã¯ä¸‹ãŒã‚‹ã¨ã„ã†å°è±¡ã€‚

ãƒªãƒã‚¸ãƒˆãƒªã«ãƒ‡ãƒ¼ã‚¿æ“ä½œã‚’é›†ä¸­ã™ã‚‹ã“ã¨ã§è¤‡é›‘ã«ãªã‚Šã™ããŸãƒ†ãƒ¼ãƒ–ãƒ«æ›´æ–°ã‚„ãƒã‚°ãŒç™ºç”Ÿã—ã‚„ã™ã„å‡¦ç†ãªã©
åˆ†é›¢ã€æŠ½è±¡åŒ–ã«ã‚ˆã£ã¦ãƒ¡ãƒªãƒƒãƒˆã‚’å¾—ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã‚‹ã€‚
ãªã®ã§å¯¾è±¡ã‚¯ãƒ©ã‚¹ãŒå¢—åŠ ã™ã‚‹ã“ã¨ã«å¯¾ã—ã¦ãƒ¡ãƒªãƒƒãƒˆã®ã»ã†ãŒå¤šã‘ã‚Œã°æ¡ç”¨ã™ã¹ãã€‚

ãŸã ã€ãƒªãƒã‚¸ãƒˆãƒªã«åˆ†ã‘ã‚‹ã ã‘ã§ã¯ãŠãã‚‰ãåŠ¹æœãŒè–„ãã¦
controller, service, repository, interfaceã«åˆ†ã‘ãŸã»ã†ãŒé€²åŒ–ã‚’ç™ºæ®ã™ã‚‹ã¨
serviceã«æŠ½è±¡åŒ–å‡¦ç†ã‚’æ›¸ã
1å¯¾1å¯¾ï¼‘ã§ã¯ãªã„

app\provider\RepositoryProviderã«è¨˜è¿°

## DI:Dependency Injection
ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ä¸€æ‹¬ã§æ¸ˆã‚€ã‚ˆã†ã«ã—ãŸã‚‚ã® Utility
laravel ã§ã¯ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒ†ãƒŠã¨å‘¼ã¶
å®Ÿéš›ã®ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã§ã¯ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒ†ãƒŠã«ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ç”Ÿæˆæ–¹æ³•ã‚’çµã³ä»˜ã‘ã¦åˆ©ç”¨

å‡¦ç†ã®æµã‚Œã¨ã—ã¦ã¯
```
ï¼‘ï¼‰ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒ†ãƒŠã«ã‚¯ãƒ©ã‚¹ã‚’ç™»éŒ²ï¼ˆãƒã‚¤ãƒ³ãƒ‰ï¼‰

ï¼’ï¼‰ã‚µãƒ¼ãƒ“ã‚¹ã‚³ãƒ³ãƒ†ãƒŠã‹ã‚‰ã‚¯ãƒ©ã‚¹ã‚’ç”Ÿæˆï¼ˆãƒªã‚¾ãƒ«ãƒ–ï¼‰
```
ã¤ã¾ã‚ŠæŠ½è±¡çš„ãªã“ã¨ã‚’è¡Œã£ã¦ã„ã‚‹ã€‚
Utilityã€€ï¼šã‚ã‚‰ã‚†ã‚‹ã¨ã“ã‚ã§ä½¿ã†å‡¦ç†ã‚’ã¾ã¨ã‚ã¦ã„ã‚‹ï¼ˆæ¬„è¦æ³¨æ„ï¼‰
facadeç™»éŒ²ã™ã‚Œã°bladeã§ã‚‚ä½¿ãˆã‚‹ï¼ˆï¼ã€€Helperï¼‰
## æµã‚Œ
ãƒ•ãƒ­ãƒ³ãƒˆã¨ãƒãƒƒã‚¯ã‚’åˆ†é›¢ã—ãŸå ´åˆã§è€ƒãˆã¦ã¿ã‚ˆã†ã€‚ã‚ˆãã‚ã‚‹ç”»åƒç™»éŒ²ã§ã®å‹•ãã‚’è¦‹ã¦ã¿ã‚‹ã€‚
### Interfaceè¨­è¨ˆ
ã‚¯ãƒ©ã‚¹ã‹ã‚‰"ãƒ¦ãƒ¼ã‚¶ãƒ¼å®šç¾©å‹"ã®èƒ½åŠ›ã®ã¿ã‚’åˆ†é›¢ã—ãŸè¨€èªæ©Ÿæ§‹ã€‚PHPã®ãã‚Œã¯Javaã®interfaceã®ãƒ‘ã‚¯ãƒªã€‚
ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹åŒ–ã§ããªã„ã‚¯ãƒ©ã‚¹ã®å‡ºæ¥æãªã„
```php:HogeImageRepositoryInterface
interface HogeImageRepositoryInterface
{   
    public function getImages(int $hogeId): Collection;

    public function create(array $params): HogeImage;

    public function update(HogeImage $hogeImage, array $params): bool;
}
```
interfaceã¯ãã‚Œå˜ç‹¬ã§ã¯å½¹ã«ç«‹ãŸãªã„ã€‚ã‚‚ã£ã±ã‚‰ã€ã‚¿ã‚¤ãƒ—ãƒ’ãƒ³ãƒ†ã‚£ãƒ³ã‚°ï¼ˆï¼šå‹å®£è¨€ï¼‰ã¨çµ„ã¿åˆã‚ã›ã¦ä½¿ã†

ãƒ¡ãƒªãƒƒãƒˆï¼šhttp://blog.tojiru.net/article/377526320.html
>ã‚¿ã‚¤ãƒ—ãƒ’ãƒ³ãƒ†ã‚£ãƒ³ã‚°ã§ã‚¯ãƒ©ã‚¹ã§ã¯ãªãã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’è¦æ±‚ã™ã‚‹ã“ã¨ã§ã€
>è¬™è™šã§çµ„ã¿åˆã‚ã›ã‚„ã™ã„ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒä½œã‚Œã¦ã€ã—ã‹ã‚‚å‹ã«ã‚ˆã‚‹ï¼ˆã‚ã‚‹ç¨‹åº¦ã®ï¼‰å“è³ªä¿è¨¼ãŒã§ãã¾ã™ã€‚
> ç„¡é—‡ã«ã‚¯ãƒ©ã‚¹ã‚’è¦æ±‚ã™ã‚‹ã®ã¯ä¸ä½œæ³•ãªã®ã§ã‚„ã‚ã¾ã—ã‚‡ã†ã€‚

å®Ÿè£…ã‚’å¤‰ãˆã‚‹å ´åˆã€ORMã§æ‰€å¾—ã™ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³/ã‚¯ã‚¨ãƒªãƒ“ãƒ«ãƒ€ã§å–å¾—ã™ã‚‹
å®Ÿè£…ã®ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å¤‰æ›´ã™ã‚‹éš›ã«é€²åŒ–ã‚’ç™ºæ®ã€‚

### Repository
ãƒ‡ãƒ¼ã‚¿ã®å–å¾—ã®ã¿è¡Œã†ã‚ˆã†ã«ã—ã¦ã„ã‚‹
```php:HogeImageRepository
```
### Service Provider
App/Providers/AppServiceProvider.phpã«ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¨å®Ÿè£…ã‚¯ãƒ©ã‚¹ã‚’ç™»éŒ²
```
public function register()
{
   // ç•¥
   $this->app->bind('news_category', NewsCategoryService::class);
}   
```
### ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼
ã‚ã¨ã¯å¼•ãå‡ºã—ã¦æ¸¡ã™ã ã‘
```
```

https://qiita.com/mikesorae/items/ff8192fb9cf106262dbf

